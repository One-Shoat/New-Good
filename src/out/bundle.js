(()=>{function m(t,e,l,s,a,r){let n=new Image;n.src=e,t.drawImage(n,l,s,a,r)}function u(t,e,l,s,a,r){let n="";e=="roboto"&&(n="24px Roboto"),e=="arial"&&(n="24px Arial"),t.font=n,t.fillStyle=l,t.fillText(s,a,r)}var d={i:0},w=[],v=document.getElementById("game");function j(t){for(let e=0;e<t;e++)i.push({id:e,x:Math.floor(Math.random()*v.width),y:Math.floor(Math.random()*v.height),img:"./assets/sprite_0.png",type:"bugener",life:3})}function x(){w.forEach(e=>clearTimeout(e)),w=[];let t=0;for(d.i=0;d.i<1e3;d.i++){let e=d.i,l=setTimeout(()=>{j(3*e)},t);w.push(l),t+=12e3}}var o=document.getElementById("game"),h=o.getContext("2d"),i=[];o.width=window.innerWidth;o.height=window.innerHeight;var f=0,p,g,c=3,y=!1,L={point:f,life:c};addEventListener("mousedown",t=>{p=t.clientX,g=t.clientY,y=!0,_(p,g,1128,728,.1)&&alert("colision detected");for(let e=0;e<i.length;e++)if(i[e].life==2&&(i[e].img="./assets/sprite_1.png"),i[e].life==1&&(i[e].img="./assets/sprite_2.png"),y&&_(i[e].x,i[e].y,p,g,.06)){i[e].life-=1,f+=1;break}});addEventListener("mouseup",t=>{p=0,g=0,y=!1});function A(){c==0&&(i=[],d.i=0,u(h,"arial","red","A energia, foi redestribuida por todos os cantos do universo.",50,50),setTimeout(()=>{c==0&&(f>14?f-=15:f-=f,d.i=0,x()),c=3},2e3))}function _(t,e,l,s,a){let r=Math.abs(l-t),n=Math.abs(s-e);return r<=a*o.width&&n<=a*o.height}function X(t,e,l,s,a,r,n){let b=l-t,M=s-e,I=Math.sqrt(b*b+M*M),T=(r+n)/4;return I<T+a*o.width}x();function E(){requestAnimationFrame(E),h.clearRect(0,0,o.width,o.height);for(let t=0;t<i.length;t++){let e=20,l=20,s=o.width/2-i[t].x,a=o.height/2-i[t].y,r=i[t].x+s*.008,n=i[t].y+a*.008;i[t].x=r,i[t].y=n,i[t].life<0&&i.splice(t,1),X(i[t].x,i[t].y,o.width/2,o.height/2,.04,e,l)&&(i.splice(t,1),c-=1),m(h,i[t].img,i[t].x,i[t].y,50,50)}A();for(let t=0;t<c;t++)m(h,"https://cdn.discordapp.com/attachments/1087504461364207656/1095433836432740362/Coracao_cheio.png",t*50,0,150,150);u(h,"roboto","blue",`Points: ${f}`,500,70),m(h,"https://media.discordapp.net/attachments/1087504461364207656/1095456781418893433/image.png?width=120&height=120",1e3,600,128,128),m(h,"https://media.discordapp.net/attachments/1091018990089932850/1093625787413966903/New_Piskel_20.png?width=128&height=128",o.width/2,o.height/2,50,50)}E();})();
