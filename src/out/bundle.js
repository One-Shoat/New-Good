(()=>{function p(e,t,r,o,d,g){let h=new Image;h.src=t,e.drawImage(h,r,o,d,g)}function A(e,t,r,o,d,g){let h="";t=="roboto"&&(h="24px Roboto"),t=="arial"&&(h="24px Arial"),e.font=h,e.fillStyle=r,e.fillText(o,d,g)}var f={i:0},M=[],b=document.getElementById("game");function I(e,t){for(let r=0;r<e;r++)t=="bugenner"&&i.push({id:r,x:Math.floor(Math.random()*b.width),y:Math.floor(Math.random()*b.height),img:"./assets/sprite_0.png",type:"bugenner",life:3}),t=="singulary"&&i.push({id:r,x:Math.floor(Math.random()*b.width),y:Math.floor(Math.random()*b.height),img:"https://media.discordapp.net/attachments/1087504461364207656/1095427124929769472/Sprite-0005.png?width=46&height=46",type:"singulary",life:5})}function _(){M.forEach(t=>clearTimeout(t)),M=[];let e=0;for(f.i=0;f.i<1e3;f.i++){let t=f.i;if(f.i<50){let r=setTimeout(()=>{I(t*2,"bugenner"),I(t,"singulary")},e);M.push(r),e+=12e3}}}var U=new Audio("./assets/demage.wav");var a=document.getElementById("game"),s=a.getContext("2d"),i=[];a.width=window.innerWidth;a.height=window.innerHeight;var l=0,m,u,w=3,T=!1,y=!1,n=[{type:"a",name:"a",x:-999,y:-999}],v={x:a.width/2,y:a.height/2};addEventListener("mousedown",e=>{if(m=e.clientX,u=e.clientY,T=!0,console.log(n),c(m,u,a.width-16,a.height-16,.1)){if(y==!0)return y=!1;y=!0}if(y==!0&&c(m,u,a.width-64,a.height-256,.05))return l<30?alert("pobre fudido"):(l-=30,n.push({type:"graminea",name:"graminea",x:-999,y:-999,life:3}));if(y==!0&&c(m,u,a.width-64,a.height-175,.05))return l<30?alert("pobre fudido"):(l-=30,n.push({type:"cerca",name:"cerca",x:-999,y:-999,life:7}));if(y==!0&&c(m,u,a.width-64,a.height-220,.05))return l<50?alert("pobre fudido"):(l-=50,n.push({type:"stoneenner",name:"stoneenner",x:-999,y:-999,life:5}));n[n.length-1].type!="a"&&(n[n.length-1].type="pressed");for(let t=0;t<i.length;t++)if(i[t].type=="bugenner"&&(i[t].life==2&&(i[t].img="./assets/sprite_1.png"),i[t].life==1&&(i[t].img="./assets/sprite_2.png")),i[t].type=="singulary"&&(i[t].life==4&&(i[t].img="./assets/sprite_singulary0.png"),i[t].life==3&&(i[t].img="./assets/sprite_singulary1.png"),i[t].life==2&&(i[t].img="./assets/sprite_singulary2.png"),i[t].life==1&&(i[t].img="./assets/sprite_singulary3.png")),T&&c(i[t].x,i[t].y,m,u,.06)){i[t].life-=1,l+=1;break}});addEventListener("mouseup",e=>{m=0,u=0,T=!1});addEventListener("mousemove",e=>{if(n[n.length-1].type!="pressed"&&n[n.length-1].type!="a")return n[n.length-1].x=e.clientX,n[n.length-1].y=e.clientY});function C(){w<=0&&(i=[],f.i=0,p(s,"./assets/gameover.png",0,0,a.width,a.height),setTimeout(()=>{w=3,l<14?l-=l:l-=15,f.i=0,_()},2e3))}function c(e,t,r,o,d){let g=Math.abs(r-e),h=Math.abs(o-t);return g<=d*a.width&&h<=d*a.height}function D(e,t,r,o,d,g,h){let x=r-e,E=o-t,Y=Math.sqrt(x*x+E*E),j=(g+h)/4;return Y<j+d*a.width}_();function X(){requestAnimationFrame(X),s.clearRect(0,0,a.width,a.height);for(let e=0;e<i.length;e++){let t=20,r=20,o=0,d=a.width/2-i[e].x,g=a.height/2-i[e].y;i[e].type=="bugenner"&&(o=.008),i[e].type=="singulary"&&(o=.004);let h=i[e].x+d*o,x=i[e].y+g*o;i[e].x=h,i[e].y=x,i[e].life<0&&i.splice(e,1),D(i[e].x,i[e].y,a.width/2,a.height/2,.04,t,r)&&(i[e].type=="bugenner"&&(w-=1),i[e].type=="singulary"&&(w-=.5),U.play(),i.splice(e,1)),p(s,i[e].img,i[e].x,i[e].y,50,50)}for(let e=0;e<w;e++)p(s,"https://cdn.discordapp.com/attachments/1087504461364207656/1095433836432740362/Coracao_cheio.png",e*50,0,150,150);y==!0&&(s.globalAlpha=.9,p(s,"https://media.discordapp.net/attachments/1087503910098436158/1095756195362508810/sprite__grama_de_pontos0_1.png?width=120&height=120",a.width-128,a.height-256,128,128),s.globalAlpha=1);for(let e=0;e<n.length;e++){n[e].life<0&&n.splice(e,1);for(let t=0;t<i.length;t++)c(n[e].x,n[e].y,i[t].x,i[t].y,.1)&&n[e].type=="pressed"&&n[e].name=="stoneenner"&&(i.splice(t,1),n[e].life-=.5),c(n[e].x,n[e].y,i[t].x,i[t].y,.05)&&n[e].type=="pressed"&&(i[t].type=="bugenner"&&(n[e].life-=1),i[t].type=="singulary"&&(n[e].life-=.5),i.splice(t,1));if(n[e].type=="graminea"||n[e].type=="pressed"&&n[e].name=="graminea"){n[e].lastUpdateTime||(n[e].lastUpdateTime=Date.now());let t=Date.now();t-n[e].lastUpdateTime>=3e3&&(n[e].lastUpdateTime=t,l+=1),p(s,"./assets/graminea.png",n[e].x,n[e].y,32,32)}(n[e].type=="stoneenner"||n[e].type=="pressed"&&n[e].name=="stoneenner")&&p(s,"./assets/Coracao_cheio.png",n[e].x,n[e].y,64,64),(n[e].type=="cerca"||n[e].type=="pressed"&&n[e].name=="cerca")&&p(s,"./assets/cerca.png",n[e].x,n[e].y,32,32)}v.y=Math.floor(Math.random()*21)+a.height/2-10,p(s,"https://media.discordapp.net/attachments/1087504461364207656/1096189471885639750/Sprite-0001-exp40rt.png?width=300&height=300",a.width/2+500,a.height/2-300,64,64),A(s,"roboto","blue",`Points: ${l}`,500,70),p(s,"https://media.discordapp.net/attachments/1087504461364207656/1095456781418893433/image.png?width=120&height=120",a.width-128,a.height-128,128,128),p(s,"https://media.discordapp.net/attachments/1087504461364207656/1097932946888982558/KOtsu-export.png?width=287&height=287",v.x,v.y,50,50),C()}X();})();
