(()=>{function f(e,i,o,s,r,h){let a=new Image;a.src=i,e.drawImage(a,o,s,r,h)}function y(e,i,o,s,r,h){let a="";i=="roboto"&&(a="24px Roboto"),i=="arial"&&(a="24px Arial"),e.font=a,e.fillStyle=o,e.fillText(s,r,h)}var d={i:0},x=[],m=document.getElementById("game");function A(e,i){for(let o=0;o<e;o++)i=="bugenner"&&t.push({id:o,x:Math.floor(Math.random()*m.width),y:Math.floor(Math.random()*m.height),img:"./assets/sprite_0.png",type:"bugenner",life:3}),i=="singulary"&&t.push({id:o,x:Math.floor(Math.random()*m.width),y:Math.floor(Math.random()*m.height),img:"https://media.discordapp.net/attachments/1087504461364207656/1095427124929769472/Sprite-0005.png?width=46&height=46",type:"singulary",life:5})}function b(){x.forEach(i=>clearTimeout(i)),x=[];let e=0;for(d.i=0;d.i<1e3;d.i++){let i=d.i;if(d.i<50){let o=setTimeout(()=>{A(i*2,"bugenner"),A(i,"singulary")},e);x.push(o),e+=12e3}}}var Y=new Audio("./assets/demage.wav"),E=Y;var n=document.getElementById("game"),l=n.getContext("2d"),t=[];n.width=window.innerWidth;n.height=window.innerHeight;var g=0,k=0,u,c,p=3,M=!1,F={enem:k},w=!1;addEventListener("mousedown",e=>{if(u=e.clientX,c=e.clientY,M=!0,I(u,c,n.width-16,n.height-16,.1)){if(w==!0)return w=!1;w=!0}for(let i=0;i<t.length;i++)if(t[i].type=="bugenner"&&(t[i].life==2&&(t[i].img="./assets/sprite_1.png"),t[i].life==1&&(t[i].img="./assets/sprite_2.png")),M&&I(t[i].x,t[i].y,u,c,.06)){t[i].life-=1,g+=1;break}});addEventListener("mouseup",e=>{u=0,c=0,M=!1});function q(){p<=0&&(t=[],d.i=0,y(l,"arial","red","A energia, foi redestribuida por todos os cantos do universo.",50,50),setTimeout(()=>{g>14?g-=15:g-=g,d.i=0,b(),p=3},2e3))}function I(e,i,o,s,r){let h=Math.abs(o-e),a=Math.abs(s-i);return h<=r*n.width&&a<=r*n.height}function B(e,i,o,s,r,h,a){let _=o-e,v=s-i,j=Math.sqrt(_*_+v*v),X=(h+a)/4;return j<X+r*n.width}b();function T(){requestAnimationFrame(T),l.clearRect(0,0,n.width,n.height);for(let e=0;e<t.length;e++){let i=20,o=20,s=n.width/2-t[e].x,r=n.height/2-t[e].y,h=t[e].x+s*.008,a=t[e].y+r*.008;t[e].x=h,t[e].y=a,t[e].life<0&&t.splice(e,1),B(t[e].x,t[e].y,n.width/2,n.height/2,.04,i,o)&&(t[e].type=="bugenner"&&(p-=1),t[e].type=="singulary"&&(p-=.5),E.play(),t.splice(e,1)),f(l,t[e].img,t[e].x,t[e].y,50,50)}q();for(let e=0;e<p;e++)f(l,"https://cdn.discordapp.com/attachments/1087504461364207656/1095433836432740362/Coracao_cheio.png",e*50,0,150,150);w==!0&&(l.globalAlpha=.9,f(l,"https://media.discordapp.net/attachments/1087503910098436158/1095756195362508810/sprite__grama_de_pontos0_1.png?width=120&height=120",n.width-128,n.height-256,128,128),l.globalAlpha=1),y(l,"roboto","blue",`Points: ${g}`,500,70),f(l,"https://media.discordapp.net/attachments/1087504461364207656/1095456781418893433/image.png?width=120&height=120",n.width-128,n.height-128,128,128),f(l,"https://media.discordapp.net/attachments/1091018990089932850/1093625787413966903/New_Piskel_20.png?width=128&height=128",n.width/2,n.height/2,50,50)}T();})();
