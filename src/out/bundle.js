(()=>{function c(t,i,l,s,r,a){let n=new Image;n.src=i,t.drawImage(n,l,s,r,a)}function g(t,i,l,s,r,a){let n="";i=="roboto"&&(n="24px Roboto"),i=="arial"&&(n="24px Arial"),t.font=n,t.fillStyle=l,t.fillText(s,r,a)}var d={i:0},p=[],v=document.getElementById("game");function _(t){for(let i=0;i<t;i++)e.push({id:i,x:Math.floor(Math.random()*v.width),y:Math.floor(Math.random()*v.height),img:"http://127.0.0.1:5500/assets/sprite_0.png",type:"bugener",life:3})}function w(){p.forEach(i=>clearTimeout(i)),p=[];let t=0;for(d.i=0;d.i<1e3;d.i++){let i=d.i,l=setTimeout(()=>{_(3*i)},t);p.push(l),t+=12e3}}var o=document.getElementById("game"),h=o.getContext("2d"),e=[];o.width=window.innerWidth;o.height=window.innerHeight;var M=0,x,y,f=3,b=!1,P={point:M,life:f};addEventListener("mousedown",t=>{x=t.clientX,y=t.clientY,b=!0;for(let i=0;i<e.length;i++)if(e[i].life==2&&(e[i].img="http://127.0.0.1:5500/assets/sprite_1.png"),e[i].life==1&&(e[i].img="http://127.0.0.1:5500/assets/sprite_2.png"),b&&X(e[i].x,e[i].y,x,y,.06)){e[i].life-=1,M+=1;break}});addEventListener("mouseup",t=>{x=0,y=0,b=!1});function T(){f==0&&(e=[],d.i=0,g(h,"arial","red","A energia, foi redestribuida por todos os cantos do universo.",50,50),setTimeout(()=>{f==0&&(d.i=0,w()),f=3},2e3))}function X(t,i,l,s,r){let a=Math.abs(l-t),n=Math.abs(s-i);return a<=r*o.width&&n<=r*o.height}function Y(t,i,l,s,r,a,n){let m=l-t,u=s-i,E=Math.sqrt(m*m+u*u),I=(a+n)/4;return E<I+r*o.width}w();function j(){requestAnimationFrame(j),h.clearRect(0,0,o.width,o.height);for(let t=0;t<e.length;t++){let i=e[t].x,l=e[t].y,s=20,r=20,a=o.width/2-e[t].x,n=o.height/2-e[t].y,m=e[t].x+a*.008,u=e[t].y+n*.008;e[t].x=m,e[t].y=u,e[t].life<0&&e.splice(t,1),Y(e[t].x,e[t].y,o.width/2,o.height/2,.04,s,r)&&(e.splice(t,1),f-=1),c(h,e[t].img,e[t].x,e[t].y,50,50)}T(),g(h,"roboto","blue",`Points: ${M}`,500,70),c(h,"https://media.discordapp.net/attachments/1091018990089932850/1093625787413966903/New_Piskel_20.png?width=128&height=128",o.width/2,o.height/2,50,50)}j();})();
