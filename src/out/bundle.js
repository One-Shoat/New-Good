(()=>{function p(e,i,a,s,l,h){let o=new Image;o.src=i,e.drawImage(o,a,s,l,h)}function _(e,i,a,s,l,h){let o="";i=="roboto"&&(o="24px Roboto"),i=="arial"&&(o="24px Arial"),e.font=o,e.fillStyle=a,e.fillText(s,l,h)}var d={i:0},b=[],x=document.getElementById("game");function I(e,i){for(let a=0;a<e;a++)i=="bugenner"&&t.push({id:a,x:Math.floor(Math.random()*x.width),y:Math.floor(Math.random()*x.height),img:"./assets/sprite_0.png",type:"bugenner",life:3}),i=="singulary"&&t.push({id:a,x:Math.floor(Math.random()*x.width),y:Math.floor(Math.random()*x.height),img:"https://media.discordapp.net/attachments/1087504461364207656/1095427124929769472/Sprite-0005.png?width=46&height=46",type:"singulary",life:5})}function v(){b.forEach(i=>clearTimeout(i)),b=[];let e=0;for(d.i=0;d.i<1e3;d.i++){let i=d.i;if(d.i<50){let a=setTimeout(()=>{I(i*2,"bugenner"),I(i,"singulary")},e);b.push(a),e+=12e3}}}var L=new Audio("./assets/demage.wav"),T=L;var n=document.getElementById("game"),r=n.getContext("2d"),t=[];n.width=window.innerWidth;n.height=window.innerHeight;var f=0,m,u,y=3,A=!1,c=!1,g=[{type:"0"}];addEventListener("mousedown",e=>{if(m=e.clientX,u=e.clientY,A=!0,c==!0&&M(m,u,n.width-64,n.height-256,.05,8)?g.push({type:"graminea"}):g[g.length-1].type="pressed",console.log(g),M(m,u,n.width-16,n.height-16,.1)){if(c==!0)return c=!1;c=!0}for(let i=0;i<t.length;i++)if(t[i].type=="bugenner"&&(t[i].life==2&&(t[i].img="./assets/sprite_1.png"),t[i].life==1&&(t[i].img="./assets/sprite_2.png")),t[i].type=="singulary"&&(t[i].life==4&&(t[i].img="./assets/sprite_singulary0.png"),t[i].life==3&&(t[i].img="./assets/sprite_singulary1.png"),t[i].life==2&&(t[i].img="./assets/sprite_singulary2.png"),t[i].life==1&&(t[i].img="./assets/sprite_singulary3.png")),A&&M(t[i].x,t[i].y,m,u,.06)){t[i].life-=1,f+=1;break}});addEventListener("mouseup",e=>{m=0,u=0,A=!1});addEventListener("mousemove",e=>{g[g.length-1]!="pressed"&&(movex=e.clientX,movey=e.clientY)});function k(){y<=0&&(t=[],d.i=0,_(r,"arial","red","A energia, foi redestribuida por todos os cantos do universo.",50,50),setTimeout(()=>{f>14?f-=15:f-=f,d.i=0,v(),y=3},2e3))}function M(e,i,a,s,l){let h=Math.abs(a-e),o=Math.abs(s-i);return h<=l*n.width&&o<=l*n.height}function q(e,i,a,s,l,h,o){let w=a-e,E=s-i,Y=Math.sqrt(w*w+E*E),j=(h+o)/4;return Y<j+l*n.width}v();function X(){requestAnimationFrame(X),r.clearRect(0,0,n.width,n.height);for(let e=0;e<t.length;e++){let i=20,a=20,s=0,l=n.width/2-t[e].x,h=n.height/2-t[e].y;t[e].type=="bugenner"&&(s=.008),t[e].type=="singulary"&&(s=.004);let o=t[e].x+l*s,w=t[e].y+h*s;t[e].x=o,t[e].y=w,t[e].life<0&&t.splice(e,1),q(t[e].x,t[e].y,n.width/2,n.height/2,.04,i,a)&&(t[e].type=="bugenner"&&(y-=1),t[e].type=="singulary"&&(y-=.5),T.play(),t.splice(e,1)),p(r,t[e].img,t[e].x,t[e].y,50,50)}k();for(let e=0;e<y;e++)p(r,"https://cdn.discordapp.com/attachments/1087504461364207656/1095433836432740362/Coracao_cheio.png",e*50,0,150,150);c==!0&&(r.globalAlpha=.9,p(r,"https://media.discordapp.net/attachments/1087503910098436158/1095756195362508810/sprite__grama_de_pontos0_1.png?width=120&height=120",n.width-128,n.height-256,128,128),r.globalAlpha=1),g[g.length-1]=="graminea"&&p(r,"https://media.discordapp.net/attachments/1087503910098436158/1095756195362508810/sprite__grama_de_pontos0_1.png?width=120&height=120",50,50,128,128),_(r,"roboto","blue",`Points: ${f}`,500,70),p(r,"https://media.discordapp.net/attachments/1087504461364207656/1095456781418893433/image.png?width=120&height=120",n.width-128,n.height-128,128,128),p(r,"https://media.discordapp.net/attachments/1091018990089932850/1093625787413966903/New_Piskel_20.png?width=128&height=128",n.width/2,n.height/2,50,50)}X();})();
